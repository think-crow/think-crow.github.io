<!doctype html><html lang=zh><head><meta name=viewport content="width=device-width,initial-scale=1"><title>node实现鼠标点击事件</title>
<meta charset=utf-8><meta name=description content="Ladder@碰到一个网站，页面刷新浏览量自动加2，试一下看能否自动点击鼠标实现浏览量增加！"><meta name=author content="Haoshuang Ren"><link rel=canonical href=https://think-crow.github.io/blog/zh/node%E5%AE%9E%E7%8E%B0%E9%BC%A0%E6%A0%87%E7%82%B9%E5%87%BB%E4%BA%8B%E4%BB%B6/><meta name=google-site-verification content="RL6kP6-6yjRPyYGLeqBQ2JIX6QQAz7A6gHZb7bHlZnU"><link rel=alternate type=application/rss+xml href=https://think-crow.github.io//index.xml title=HaoshuangRen><meta property="og:url" content="https://think-crow.github.io/blog/zh/node%E5%AE%9E%E7%8E%B0%E9%BC%A0%E6%A0%87%E7%82%B9%E5%87%BB%E4%BA%8B%E4%BB%B6/"><meta property="og:site_name" content="HaoshuangRen"><meta property="og:title" content="node实现鼠标点击事件"><meta property="og:description" content="碰到一个网站，页面刷新浏览量自动加2，试一下看能否自动点击鼠标实现浏览量增加！"><meta property="og:locale" content="zh"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2024-11-11T21:04:07+08:00"><meta property="article:modified_time" content="2024-11-11T21:04:07+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="node实现鼠标点击事件"><meta name=twitter:description content="碰到一个网站，页面刷新浏览量自动加2，试一下看能否自动点击鼠标实现浏览量增加！"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Blogs","item":"https://think-crow.github.io/blog/"},{"@type":"ListItem","position":2,"name":"node实现鼠标点击事件","item":"https://think-crow.github.io/blog/zh/node%E5%AE%9E%E7%8E%B0%E9%BC%A0%E6%A0%87%E7%82%B9%E5%87%BB%E4%BA%8B%E4%BB%B6/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"node实现鼠标点击事件","name":"node实现鼠标点击事件","description":"碰到一个网站，页面刷新浏览量自动加2，试一下看能否自动点击鼠标实现浏览量增加！\n","keywords":[],"articleBody":"碰到一个网站，页面刷新浏览量自动加2，试一下看能否自动点击鼠标实现浏览量增加！\n一、实现鼠标点击动作： 1、node init初始化一个项目\n2、新建文件index.js\n3、复制下面代码进index.js文件，后运行node index.js\n实现鼠标自动点击：\nconst { mouse } = require('@nut-tree/nut-js'); (async () =\u003e { try { // 设置屏幕分辨率（根据你的屏幕调整） const screenWidth = 2560; // 假设你的屏幕宽度是2560 const screenHeight = 1440; // 假设你的屏幕高度是1440 // 移动鼠标到屏幕中心 await mouse.move({ x: screenWidth / 2, y: screenHeight / 2 }); // 循环点击100次 for (let i = 0; i \u003c 50; i++) { await mouse.leftClick(); // 执行右键点击 // console.log(`Click #${i + 1}`); } console.log('Completed 100 right-clicks!'); } catch (error) { console.error('Error occurred:', error); // 捕获并打印错误信息 } })(); 关于nut.js：\nnut.js 是一个用于自动化鼠标和键盘控制的 Node.js 库，它通过模拟鼠标移动、点击、键盘输入等操作来进行自动化任务。这个库特别适合做 GUI 自动化测试、自动化操作、脚本化的用户交互等任务。nut.js 可以被广泛应用于自动化测试、自动化桌面任务等场景。\n二、点击太慢了，以下为并行访问 第一思路：只发送GET请求，来增加访问量！发现get请求数据成功但访问量不会增加，模拟请求头也不行，遂改为直接打开浏览器访问！（node还有个库专门识别图像进行自动化点击，这个库识别图片失败，就没再深入！）\nconst puppeteer = require('puppeteer'); // 请求的目标URL const url = 'https://xxx.xxx'; // 最大并行浏览器数 const maxConcurrency = 20; // 每个浏览器运行的请求次数 const totalRequests = 200; // 每个请求之间的延迟（200毫秒） const delay = 200; const sleep = (ms) =\u003e new Promise(resolve =\u003e setTimeout(resolve, ms)); const fetchWithPuppeteer = async () =\u003e { // 创建一个存储任务的队列 const tasks = []; // 创建任务函数 const task = async (browserIndex) =\u003e { const browser = await puppeteer.launch({ headless: true }); const page = await browser.newPage(); let retries = 0; for (let i = 0; i \u003c totalRequests; i++) { let success = false; while (retries \u003c 3 \u0026\u0026 !success) { // 最大重试次数为3次 try { await sleep(delay); // 每个请求间隔200ms await page.goto(url, { waitUntil: 'load' }); // console.log(`Browser ${browserIndex}: Request ${i + 1} - Page Loaded`); // 模拟滚动页面 await page.evaluate(() =\u003e window.scrollBy(0, window.innerHeight)); success = true; // 标记成功 } catch (error) { retries++; console.error(`Browser ${browserIndex}: Request ${i + 1} failed - Retry ${retries}/3`, error); if (retries \u003e= 3) { console.error(`Browser ${browserIndex}: Request ${i + 1} failed after 3 retries.`); } } } } await browser.close(); // 完成任务后关闭浏览器 console.log(`Browser ${browserIndex}: All requests completed.`); }; // 启动最多5个浏览器实例并行处理200次请求 for (let i = 0; i \u003c maxConcurrency; i++) { tasks.push(task(i + 1)); // 将任务推入任务队列 } // 等待所有任务完成 await Promise.all(tasks); console.log('All requests have been completed.'); }; fetchWithPuppeteer().catch((err) =\u003e console.error('Error in fetchWithPuppeteer:', err)); （经测试同时开20个浏览器运行最佳）每秒能增加一百多的访问量\n引用库介绍：Puppeteer 是一个由 Google Chrome 团队开发的 Node.js 库，用于控制 Headless Chrome（无头浏览器）或者全功能的 Chrome 浏览器。它为开发者提供了一个高级 API，用于自动化浏览器任务，如网页爬取、界面测试、截图、生成 PDF 等。Puppeteer 是一个非常强大的工具，尤其适用于需要与网页交互、执行 JavaScript 或模拟用户行为的场景。\n","wordCount":"1020","inLanguage":"zh","datePublished":"2024-11-11T21:04:07+08:00","dateModified":"2024-11-11T21:04:07+08:00","author":{"@type":"Person","name":"Haoshuang Ren"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://think-crow.github.io/blog/zh/node%E5%AE%9E%E7%8E%B0%E9%BC%A0%E6%A0%87%E7%82%B9%E5%87%BB%E4%BA%8B%E4%BB%B6/"},"publisher":{"@type":"Organization","name":"HaoshuangRen","logo":{"@type":"ImageObject","url":"https://think-crow.github.io/favicon.ico"}}}</script><link rel=icon href=/images/avatar.ico sizes=16x16><link rel=apple-touch-icon href=/images/avatar.ico><link rel=manifest href=/images/avatar.ico><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/lxgw-wenkai-webfont@1.7.0/style.css><link rel=stylesheet href=/css/main.min.ec28f09e946fc0df77c187fcd0d0ebde58fca6de8efb8e1620f3d45c32d4da88.css integrity="sha256-7CjwnpRvwN93wYf80NDr3lj8pt6O+44WIPPUXDLU2og=" crossorigin=anonymous media=screen><link rel=stylesheet href=/scss/highlight/github-dark.min.min.66034289ee9a113219a2c4aae0a8bd2095ab255c832a42efcf5863f10814e7a1.css><script src=/js/highlight.min.min.78901136d992bee3718b01b963f8788cd7d974e27c72bf8a283973827a216b7f.js></script><script>hljs.highlightAll()</script><script>(()=>{var t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,e=localStorage.getItem("theme");t&&e===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),t&&e==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),e==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script></head><body><main class=wrapper><nav class=navigation><section class=container><a class=navigation-brand href=/>主页
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><span></span><span></span><span></span></label><ul class=navigation-list id=navigation-list><li class="navigation-item navigation-menu"><a class=navigation-link href=/blog>文章</a></li><li class="navigation-item navigation-menu"><a class=navigation-link href=/art>即兴</a></li><li class="navigation-item navigation-menu"><a class=navigation-link href=/archives>历史文章</a></li><li class="navigation-item navigation-menu"><a class=navigation-link href=/tags>分类</a></li><li class="navigation-item navigation-menu"><a class=navigation-link href=/guestbook>留言板</a></li><li class="navigation-item navigation-menu"><a class=navigation-link href=/about>关于</a></li><li class="navigation-item menu-separator"><span>|</span></li><li class="navigation-item navigation-social"><a class=navigation-link href=https://github.com/think-crow><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></li><li class="navigation-item navigation-social"><a class=navigation-link href=/><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a></li><li class="navigation-item navigation-dark"><button id=mode type=button aria-label="toggle user light or dark theme">
<span class=toggle-dark><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span>
<span class=toggle-light><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button></li></ul></section></nav><div id=content><article class=blog-single><header class=blog-title><h1>node实现鼠标点击事件</h1></header><p><small>2024年11月11日&nbsp;· 1020 字&nbsp;· 3 分钟</small></p><div class=blog-toc><nav id=TableOfContents><ul><li><ul><li></li></ul></li></ul></nav></div><section class=blog-content><p>碰到一个网站，页面刷新浏览量自动加2，试一下看能否自动点击鼠标实现浏览量增加！</p><h4 id=一实现鼠标点击动作><strong>一、实现鼠标点击动作：</strong></h4><p>1、node init初始化一个项目</p><p>2、新建文件index.js</p><p>3、复制下面代码进index.js文件，后运行node index.js</p><p>实现鼠标自动点击：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>mouse</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;@nut-tree/nut-js&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(<span style=color:#66d9ef>async</span> () =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 设置屏幕分辨率（根据你的屏幕调整）
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>screenWidth</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>2560</span>;  <span style=color:#75715e>// 假设你的屏幕宽度是2560
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>screenHeight</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1440</span>; <span style=color:#75715e>// 假设你的屏幕高度是1440
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 移动鼠标到屏幕中心
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>mouse</span>.<span style=color:#a6e22e>move</span>({ <span style=color:#a6e22e>x</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>screenWidth</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>y</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>screenHeight</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span> });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 循环点击100次
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>50</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>mouse</span>.<span style=color:#a6e22e>leftClick</span>();  <span style=color:#75715e>// 执行右键点击
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>//   console.log(`Click #${i + 1}`);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#39;Completed 100 right-clicks!&#39;</span>);
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>catch</span> (<span style=color:#a6e22e>error</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>error</span>(<span style=color:#e6db74>&#39;Error occurred:&#39;</span>, <span style=color:#a6e22e>error</span>);  <span style=color:#75715e>// 捕获并打印错误信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  }
</span></span><span style=display:flex><span>})();
</span></span></code></pre></div><p><strong>关于nut.js</strong>：</p><p><code>nut.js</code> 是一个用于自动化鼠标和键盘控制的 Node.js 库，它通过模拟鼠标移动、点击、键盘输入等操作来进行自动化任务。这个库特别适合做 GUI 自动化测试、自动化操作、脚本化的用户交互等任务。<code>nut.js</code> 可以被广泛应用于自动化测试、自动化桌面任务等场景。</p><hr><h4 id=二点击太慢了以下为并行访问>二、点击太慢了，以下为并行访问</h4><p>第一思路：只发送GET请求，来增加访问量！发现get请求数据成功但访问量不会增加，模拟请求头也不行，遂改为直接打开浏览器访问！（node还有个库专门识别图像进行自动化点击，这个库识别图片失败，就没再深入！）</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>puppeteer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;puppeteer&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 请求的目标URL
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>url</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;https://xxx.xxx&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 最大并行浏览器数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>maxConcurrency</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>20</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>// 每个浏览器运行的请求次数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>totalRequests</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>200</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>// 每个请求之间的延迟（200毫秒）
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>delay</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>200</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>sleep</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>ms</span>) =&gt; <span style=color:#66d9ef>new</span> Promise(<span style=color:#a6e22e>resolve</span> =&gt; <span style=color:#a6e22e>setTimeout</span>(<span style=color:#a6e22e>resolve</span>, <span style=color:#a6e22e>ms</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>fetchWithPuppeteer</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>async</span> () =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 创建一个存储任务的队列
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>tasks</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 创建任务函数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>task</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>async</span> (<span style=color:#a6e22e>browserIndex</span>) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>browser</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>puppeteer</span>.<span style=color:#a6e22e>launch</span>({ <span style=color:#a6e22e>headless</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span> });
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>page</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>browser</span>.<span style=color:#a6e22e>newPage</span>();
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>retries</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>totalRequests</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>success</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>while</span> (<span style=color:#a6e22e>retries</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>3</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#f92672>!</span><span style=color:#a6e22e>success</span>) { <span style=color:#75715e>// 最大重试次数为3次
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>sleep</span>(<span style=color:#a6e22e>delay</span>); <span style=color:#75715e>// 每个请求间隔200ms
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>page</span>.<span style=color:#66d9ef>goto</span>(<span style=color:#a6e22e>url</span>, { <span style=color:#a6e22e>waitUntil</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;load&#39;</span> });
</span></span><span style=display:flex><span>        <span style=color:#75715e>//   console.log(`Browser ${browserIndex}: Request ${i + 1} - Page Loaded`);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>          <span style=color:#75715e>// 模拟滚动页面
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>page</span>.<span style=color:#a6e22e>evaluate</span>(() =&gt; window.<span style=color:#a6e22e>scrollBy</span>(<span style=color:#ae81ff>0</span>, window.<span style=color:#a6e22e>innerHeight</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>success</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>; <span style=color:#75715e>// 标记成功
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        } <span style=color:#66d9ef>catch</span> (<span style=color:#a6e22e>error</span>) {
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>retries</span><span style=color:#f92672>++</span>;
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>error</span>(<span style=color:#e6db74>`Browser </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>browserIndex</span><span style=color:#e6db74>}</span><span style=color:#e6db74>: Request </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>i</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span><span style=color:#e6db74>}</span><span style=color:#e6db74> failed - Retry </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>retries</span><span style=color:#e6db74>}</span><span style=color:#e6db74>/3`</span>, <span style=color:#a6e22e>error</span>);
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>retries</span> <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>3</span>) {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>error</span>(<span style=color:#e6db74>`Browser </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>browserIndex</span><span style=color:#e6db74>}</span><span style=color:#e6db74>: Request </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>i</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span><span style=color:#e6db74>}</span><span style=color:#e6db74> failed after 3 retries.`</span>);
</span></span><span style=display:flex><span>          }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>browser</span>.<span style=color:#a6e22e>close</span>(); <span style=color:#75715e>// 完成任务后关闭浏览器
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>`Browser </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>browserIndex</span><span style=color:#e6db74>}</span><span style=color:#e6db74>: All requests completed.`</span>);
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 启动最多5个浏览器实例并行处理200次请求
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>maxConcurrency</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>tasks</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>task</span>(<span style=color:#a6e22e>i</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>)); <span style=color:#75715e>// 将任务推入任务队列
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 等待所有任务完成
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>await</span> Promise.<span style=color:#a6e22e>all</span>(<span style=color:#a6e22e>tasks</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#39;All requests have been completed.&#39;</span>);
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>fetchWithPuppeteer</span>().<span style=color:#66d9ef>catch</span>((<span style=color:#a6e22e>err</span>) =&gt; <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>error</span>(<span style=color:#e6db74>&#39;Error in fetchWithPuppeteer:&#39;</span>, <span style=color:#a6e22e>err</span>));
</span></span></code></pre></div><p>（经测试同时开20个浏览器运行最佳）每秒能增加一百多的访问量</p><p>引用库介绍：<strong>Puppeteer</strong> 是一个由 <strong>Google Chrome 团队</strong>开发的 Node.js 库，用于控制 <strong>Headless Chrome</strong>（无头浏览器）或者全功能的 Chrome 浏览器。它为开发者提供了一个高级 API，用于自动化浏览器任务，如网页爬取、界面测试、截图、生成 PDF 等。Puppeteer 是一个非常强大的工具，尤其适用于需要与网页交互、执行 JavaScript 或模拟用户行为的场景。</p></section><div class=paginator><a class=prev href=https://think-crow.github.io/blog/zh/2024-11-27-ps2020/><svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M3.77086 21.1546C11.0491 22.698 21.4339 21.7773 21.4339 16.3608V4.63375c0-.69413-.075800000000001-1.3284-.2422-1.86588M3.77086 21.1546C1.9934 20.7777.973585 18.7264 1.08749 16.688c.17931-3.209.06972-7.25665-.08236-10.47293C.87809 3.52811 3.12891 1.16316 5.51029 1.25008c4.25565.15534 9.86671-.04779 13.28091-.24466 1.2952-.074686 2.0494.62843 2.4005 1.76245M3.77086 21.1546C4.56586 21.4723 5.49168 21.7879 6.5 22.0658M21.1917 2.76787c1.918 1.4143 1.9383 9.65123 1.7087 13.59293-2.0526 7.6586-10.5943 7.3054-16.4004 5.705M21.1917 2.76787C21.7612 4.51192 22.7203 9.67216 22 16.3608 21.2797 23.0494 11.3665 22.9511 6.5 22.0658M9.94496 9C9.28897 9.61644 7.63215 10.997 6.04814 11.7966 5.98257 11.8297 5.98456 11.9753 6.05061 12.0063c1.00435.4716 2.8788 1.9201 3.89435 2.9937M6.44444 11.9667C8.86549 12.0608 14 12 16 11" stroke="currentcolor" stroke-linecap="round"/></svg>
<span>学习中职教材：ps2020图形图像处理教程</span></a>
<a class=next href=https://think-crow.github.io/blog/zh/kail-install-summary/><span>kail安装报错 解决办法</span><svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M3.77086 21.1546C11.0491 22.698 21.4339 21.7773 21.4339 16.3608V4.63375c0-.69413-.075800000000001-1.3284-.2422-1.86588M3.77086 21.1546C1.9934 20.7777.973585 18.7264 1.08749 16.688c.17931-3.209.06972-7.25665-.08236-10.47293C.87809 3.52811 3.12891 1.16316 5.51029 1.25008c4.25565.15534 9.86671-.04779 13.28091-.24466 1.2952-.074686 2.0494.62843 2.4005 1.76245M3.77086 21.1546C4.56586 21.4723 5.49168 21.7879 6.5 22.0658M21.1917 2.76787c1.918 1.4143 1.9383 9.65123 1.7087 13.59293-2.0526 7.6586-10.5943 7.3054-16.4004 5.705M21.1917 2.76787C21.7612 4.51192 22.7203 9.67216 22 16.3608 21.2797 23.0494 11.3665 22.9511 6.5 22.0658M12.055 9C12.711 9.61644 14.3679 10.997 15.9519 11.7966 16.0174 11.8297 16.0154 11.9753 15.9494 12.0063 14.945 12.4779 13.0706 13.9264 12.055 15m3.5006-3.0333C13.1345 12.0608 8 12 6 11" stroke="currentcolor" stroke-linecap="round"/></svg></a></div><div class=comments><script>const getTheme=window.localStorage&&window.localStorage.getItem("theme");let theme=getTheme==="dark"?"dark":"light",s=document.createElement("script");s.src="https://giscus.app/client.js",s.setAttribute("data-repo","think-crow/think-crow.github.io"),s.setAttribute("data-repo-id","R_kgDOMgeLsw"),s.setAttribute("data-category","Announcements"),s.setAttribute("data-category-id","DIC_kwDOMgeLs84CtPac"),s.setAttribute("data-mapping","pathname"),s.setAttribute("data-strict","0"),s.setAttribute("data-reactions-enabled","1"),s.setAttribute("data-emit-metadata","0"),s.setAttribute("data-input-position","top"),s.setAttribute("data-theme",theme),s.setAttribute("data-lang","zh-CN"),s.setAttribute("data-loading","lazy"),s.setAttribute("crossorigin","anonymous"),s.setAttribute("async",""),document.querySelector("div.comments").innerHTML="",document.querySelector("div.comments").appendChild(s)</script></div></article></div><footer class=footer><p>&copy; 2025 <a href=https://think-crow.github.io/>HaoshuangRen</a>
Powered by
<a href=https://gohugo.io/ rel=noopener target=_blank>Hugo️️</a>
<a href=https://github.com/guangzhengli/hugo-theme-ladder rel=noopener target=_blank>Ladder</a>
️</p></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M10.5376 22.7916C11.0152 22.7207 22.5795 21.1781 22.0978 10.4211 22.0536 9.43274 21.9303 8.53367 21.7387 7.71865M10.5376 22.7916C16.876 22.3728 20.0969 19.8899 21.5383 16.9142M10.5376 22.7916C9.7707 22.9055 8.97982 22.8964 8.19743 22.7725M21.7387 7.71865C21.4988 6.69828 21.1518 5.80967 20.7188 5.04257m1.0199 2.67608C22.6022 10.1105 23.0542 13.7848 21.5383 16.9142M20.7188 5.04257c-3.5504-6.28886-12.88753-4.410077-16.44303.0C2.88063 6.77451-.0433281 11.1668 1.38159 16.6571c.89322 3.4417 3.7911 5.6365 6.81584 6.1154M20.7188 5.04257c1.3509 1.89783 3.3111 6.34223 1.6353 10.37273M21.5383 16.9142C21.8737 16.4251 22.1428 15.9235 22.3541 15.4153M8.19743 22.7725C12.1971 23.4683 20.6281 22.971 22.3541 15.4153M14 10.945C13.3836 10.289 12.003 8.63215 11.2034 7.04814 11.1703 6.98257 11.0247 6.98456 10.9937 7.05061 10.5221 8.05496 9.07362 9.92941 8 10.945m3.0333-3.50056C10.9392 9.86549 11 15 12 17" stroke="currentcolor" stroke-linecap="round"/></svg>
</a><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const s=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="Copy";function n(){t.innerHTML="Copied",setTimeout(()=>{t.innerHTML="Copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),n();return}const s=document.createRange();s.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(s);try{document.execCommand("copy"),n()}catch{}o.removeRange(s)}),e.parentNode.appendChild(t)})</script></main></body><script src=https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==" crossorigin=anonymous referrerpolicy=no-referrer></script><script>const images=Array.from(document.querySelectorAll(".blog-content img"));images.forEach(e=>{mediumZoom(e,{margin:10,scrollOffset:40,container:null,template:null,background:"rgba(0, 0, 0, 0.5)"})})</script><script src=/main.min.6bb26b69159420159c74dc9e097b06a578ed2b68c701466a91a44a9632d851bd0af167a1b30012387b4c512b48ad9ad4d3394e04d77ae38d57e1920fe4ed34fe.js integrity="sha512-a7JraRWUIBWcdNyeCXsGpXjtK2jHAUZqkaRKljLYUb0K8WehswASOHtMUStIrZrU0zlOBNd6441X4ZIP5O00/g==" crossorigin=anonymous defer></script></html>